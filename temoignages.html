<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>www.ndekocreative.cd</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
      .comment-box { margin-bottom: 20px; }
      .admin-btn, .user-btn { float: right; cursor: pointer; color: red; font-size: 0.9em; margin-left: 5px; }
      .user-btn { color: blue; }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html">
          <span class="brand-logo">
            <img src="logo.png" alt="Ndeko logo">
            <span class="brand-text"></span>
          </span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link" href="index.html">Accueil</a></li>
            <li class="nav-item"><a class="nav-link" href="equipe.html">√âquipe</a></li>
            <li class="nav-item"><a class="nav-link" href="portfolio.html">Portfolio</a></li>
            <li class="nav-item"><a class="nav-link" href="blog.html">Blog</a></li>
            <li class="nav-item"><a class="nav-link active" href="temoignages.html">T√©moignages</a></li>
            <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
            <li class="nav-item"><a class="nav-link" href="apropos.html">√Ä propos</a></li>
            <li class="nav-item"><a class="btn btn-outline-light ms-2" href="devis.html">Demander un devis</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <main class="container py-5">
      <h1 class="mb-4">Ce que disent nos clients</h1>

      <!-- Liste des t√©moignages -->
      <div id="temoignages" class="row g-4"></div>

      <hr class="my-5">

      <!-- Formulaire d'ajout -->
      <h3>Ajouter un t√©moignage</h3>
      <form id="form-temoignage" class="bg-light p-4 rounded">
        <div class="mb-3">
          <label for="nom" class="form-label">Votre nom</label>
          <input type="text" id="nom" class="form-control" required>
        </div>
        <div class="mb-3">
          <label for="message" class="form-label">Votre message</label>
          <textarea id="message" class="form-control" rows="3" required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Publier</button>
      </form>

      <hr class="my-5">

      <!-- Section admin -->
      <div class="text-center mb-5">
        <button class="btn btn-secondary" onclick="activerModeAdmin()">Activer mode administrateur</button>
      </div>
    </main>

    <footer class="py-4 bg-light mt-auto">
      <div class="container text-center">
        <p class="mt-3 mb-0 text-muted"> Copyright 2025 Ndeko Creative - Tous droits r√©serv√©s</p>
        <center>
          <img src="logo.png" class="img-fluid footer-logo" alt="NDEKO logo">
        </center>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const temoignagesDiv = document.getElementById('temoignages');
      const form = document.getElementById('form-temoignage');
      let modeAdmin = false;

      // Charger les t√©moignages
      function chargerTemoignages() {
        const temoignages = JSON.parse(localStorage.getItem('temoignages') || '[]');
        temoignagesDiv.innerHTML = '';

        temoignages.forEach((t, index) => {
          const block = document.createElement('div');
          block.classList.add('col-md-6', 'comment-box');
          block.innerHTML = `
            <blockquote class="blockquote p-4 bg-white border rounded">
              <p>${t.message}</p>
              <footer class="blockquote-footer">${t.nom}</footer>
              ${modeAdmin ? `<span class="admin-btn" onclick="supprimerTemoignage(${index})">üóë Supprimer</span>` : ''}
              <span class="user-btn" onclick="modifierOuSupprimer(${index})">‚úèÔ∏è Modifier / üóë Supprimer</span>
            </blockquote>
          `;
          temoignagesDiv.appendChild(block);
        });
      }

      // Ajouter un t√©moignage
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const nom = document.getElementById('nom').value.trim();
        const message = document.getElementById('message').value.trim();

        if (nom && message) {
          const temoignages = JSON.parse(localStorage.getItem('temoignages') || '[]');
          // Ajouter un ID unique bas√© sur le timestamp
          const id = Date.now();
          temoignages.push({ id, nom, message });
          localStorage.setItem('temoignages', JSON.stringify(temoignages));
          form.reset();
          chargerTemoignages();
        }
      });

      // Mode admin
      function activerModeAdmin() {
        const motDePasse = prompt("Entrez le mot de passe administrateur :");
        if (motDePasse === "NdekoAdmin2025") {
          modeAdmin = true;
          alert("Mode administrateur activ√© !");
          chargerTemoignages();
        } else {
          alert("Mot de passe incorrect !");
        }
      }

      // Supprimer un t√©moignage admin
      function supprimerTemoignage(index) {
        if (confirm("Supprimer ce t√©moignage ?")) {
          const temoignages = JSON.parse(localStorage.getItem('temoignages') || '[]');
          temoignages.splice(index, 1);
          localStorage.setItem('temoignages', JSON.stringify(temoignages));
          chargerTemoignages();
        }
      }

      // Modifier ou supprimer par l'utilisateur
      function modifierOuSupprimer(index) {
        const temoignages = JSON.parse(localStorage.getItem('temoignages') || '[]');
        const nomUser = prompt("Entrez votre nom pour modifier/supprimer votre t√©moignage :").trim();
        if (temoignages[index].nom !== nomUser) {
          alert("Nom incorrect. Vous ne pouvez pas modifier ce t√©moignage.");
          return;
        }

        const action = prompt("Tapez 'modifier' pour √©diter ou 'supprimer' pour supprimer ce t√©moignage :").toLowerCase();
        if (action === "modifier") {
          const nouveauMessage = prompt("Entrez votre nouveau message :", temoignages[index].message);
          if (nouveauMessage) {
            temoignages[index].message = nouveauMessage.trim();
            localStorage.setItem('temoignages', JSON.stringify(temoignages));
            chargerTemoignages();
          }
        } else if (action === "supprimer") {
          if (confirm("√ätes-vous s√ªr de vouloir supprimer ce t√©moignage ?")) {
            temoignages.splice(index, 1);
            localStorage.setItem('temoignages', JSON.stringify(temoignages));
            chargerTemoignages();
          }
        } else {
          alert("Action annul√©e.");
        }
      }

      // Charger au d√©marrage
      chargerTemoignages();
    </script>
  </body>
</html>
